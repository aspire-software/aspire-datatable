<!-- <lib-aspire-popup [popupLib]="popup"></lib-aspire-popup> -->
<div class="container">
  <div class="row no-gutters">

    <!-- -------------------------------TOP-LEFT-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'top-left'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>

    <!-- {{options.componentsClass.recordsPerPage.classList}} -->
    <!-- <div *ngIf="options?.componentsClass?.recordsPerPage?.position === 'top-left'">
      <div [hidden]="options.showRecordsPerPageSelector" [class]="options.componentsClass.recordsPerPage.classList">
        <aspire-records-perpage style="visibility: hidden;"></aspire-records-perpage>
      </div>
    </div> -->

    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'top-left'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'top-left'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>

    <!-- <div class="">

    </div> -->
    <!-- <div *ngIf="options?.componentsClass?.search?.position === 'top-left'">
      <div [hidden]="options.showSearch" [class]="options.componentsClass.search.classList">
        <aspire-searching style="visibility: hidden;"></aspire-searching>
      </div>
    </div> -->



    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'top-left'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [reset]="options.resetPagination" [options]="options.paginationOptions" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <!-- <div [hidden]="options.componentsClass.recordsPerPage.position==='top-left' ||
options.componentsClass.pagination.position==='top-left' ||
options.componentsClass.search.position==='top-left'||
options.componentsClass.recordsCount.position==='top-left'"> -->

    <!-- <div style="visibility: hidden;" class="col-md-4"></div> -->
    <!-- <aspire-searching style="visibility: hidden;"  [class]="options.componentsClass.search.classList"></aspire-searching> -->

    <!-- </div> -->
    <!-- 
    <div *ngIf="(!options.showRecordsPerPageSelector && !options.showRecordsCount && !options.showSearch && !options.showPagination
    )" [class]="options.componentsClass.pagination.classList || options.componentsClass.search.classList
    || options.componentsClass.recordsCount.classList || options.componentsClass.recordsPerPage.classList">
      
    </div> -->

    <div *ngIf="(!options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position == 'top-left') ||
    (!options.showRecordsCount && options?.componentsClass?.recordsCount?.position == 'top-left') ||
    (!options?.showSearch && options?.componentsClass?.search?.position == 'top-left') ||
    (!options.showPagination && options?.componentsClass?.pagination?.position == 'top-left')"
      [class]="options?.componentsClass?.topBlankComponentClassList">
    </div>

    <!-- -------------------------------TOP-CENTER-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'top-center'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>
    <!-- 
    <div [hidden]="options.showRecordsPerPageSelector" class="col-md-4 col-sm-4" >
      <aspire-records-perpage style="visibility: hidden;"></aspire-records-perpage>
    </div> -->

    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'top-center'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'top-center'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>
    <!-- 
    <div [hidden]="options.showSearch">
      <aspire-searching style="visibility: hidden;"></aspire-searching>
    </div> -->

    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'top-center'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [reset]="options.resetPagination" [options]="options.paginationOptions" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <!-- -------------------------------TOP-RIGHT-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'top-right'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>

    <!-- <div [hidden]="options.showRecordsPerPageSelector">
      <aspire-records-perpage style="visibility: hidden;"></aspire-records-perpage>
    </div> -->

    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'top-right'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'top-right'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>

    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'top-right'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [reset]="options.resetPagination" [options]="options.paginationOptions" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <div *ngIf="(!options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position == 'top-right') ||
    (!options.showRecordsCount && options?.componentsClass?.recordsCount?.position == 'top-right') ||
    (!options?.showSearch && options?.componentsClass?.search?.position == 'top-right') ||
    (!options.showPagination && options?.componentsClass?.pagination?.position == 'top-right')"
      [class]="options?.componentsClass?.topBlankComponentClassList">
    </div>

  </div>
  <div class="row no-gutters" id="aspire-table">
    <div class="table-responsive">
      <table id="aspire-data-table" class="{{options.tableStyle}}">
        <thead class="{{options.headerStyle}}">
          <tr scope="col" *ngFor="let item of headers let i=index;" [attr.data-index]="i">
            <th scope="row" [attr.rowspan]="getRowSpan()">
              <span (click)="sort(item, $event)" *ngIf="options.showSorting">
                <span>{{item.field}} </span>
                <i class="fa fa-sort-down pl-1 sort-icon" aria-hidden="true"></i>
              </span>
              <span *ngIf="!options.showSorting">
                <span>{{item.field}} </span>
              </span>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="records.length === 0">
            <td [attr.colspan]="headers.length+1">
              <div class="col py-3 px-md-5 border text-center">
                {{options.noRecordFoundMessage}}
              </div>
            </td>
          </tr>
          <tr class="{{options.tableRowStyle}}" *ngFor="let item of records | slice: getStart() : getEnd()">
            <td class="{{options.tableDataStyle}}" *ngFor="let header of headers  let i = index"
              [attr.data-title]="header.field">
              <span *ngIf="header.type === 'date'">
                {{item[header.field] === null || item[header.field] === undefined || item[header.field] === '' ? '-' : item[header.field] | date: options.dateFormat}}
              </span>
              <span *ngIf="header.type != 'date' && header.field != 'action'">
                {{item[header.field] === null || item[header.field] === undefined || item[header.field] === '' ? '-' : item[header.field]}}
              </span>
              <span *ngIf="header.field==='action' || header.type==='any'">
                <div class="dropdown">
                  <button type="button" class="dropdown-btn"><span [class]=item[header.field].classType></span></button>
                  <div class="dropdown-content">
                    <span *ngFor="let value of item[header.field].perform;let i=index;">
                      <a class="dropdown-item" *ngIf="!value.popupConfirm" [href]=value.url>{{value.perAction}}</a>
                      <a class="dropdown-item">
                        <lib-aspire-popup *ngIf="value.popupConfirm" [popupLib]="popup" [classList]="'dropdown-item'"
                          [perAction]="value.perAction" (confirmDelete)="onConfirmDelete(item)">
                        </lib-aspire-popup>
                      </a>
                    </span>
                  </div>
                </div>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="row">
    <!-- -------------------------------BOTTOM-LEFT-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'bottom-left'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>
    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'bottom-left'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'bottom-left'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>

    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'bottom-left'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-6 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [reset]="options.resetPagination" [options]="options.paginationOptions" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <div *ngIf="(!options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position == 'bottom-left') ||
    (!options.showRecordsCount && options?.componentsClass?.recordsCount?.position == 'bottom-left') ||
    (!options?.showSearch && options?.componentsClass?.search?.position == 'bottom-left') ||
    (!options.showPagination && options?.componentsClass?.pagination?.position == 'bottom-left')"
      [class]="options?.componentsClass?.bottomBlankComponentClassList">
    </div>

    <!-- -------------------------------BOTTOM-CENTER-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'bottom-center'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>

    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'bottom-center'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'bottom-center'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>

    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'bottom-center'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [reset]="options.resetPagination" [options]="options.paginationOptions" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <!-- -------------------------------BOTTOM-RIGHT-POSITION------------------------------------- -->
    <div
      *ngIf="options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position === 'bottom-right'"
      [class]="options?.componentsClass?.recordsPerPage?.classList ? options?.componentsClass?.recordsPerPage?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-perpage [recordsPerPageOptions]="options.recordsPerPageOptions"
        [itemsPerPage]="options.itemsPerPage" [class]="options?.componentsClass?.recordsPerPage?.alignmentClassList"
        (perPageRecords)="getPerPageRecords($event)">
      </aspire-records-perpage>
    </div>

    <div *ngIf="options.showRecordsCount && options?.componentsClass?.recordsCount?.position === 'bottom-right'"
      [class]="options?.componentsClass?.recordsCount?.classList ? options?.componentsClass?.recordsCount?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-records-count [class]="options?.componentsClass?.recordsCount?.alignmentClassList"
        [totalRecords]="records.length" [itemsPerPage]="options.itemsPerPage">
      </aspire-records-count>
    </div>

    <div *ngIf="options?.showSearch && options?.componentsClass?.search?.position === 'bottom-right'"
      [class]="options?.componentsClass?.search?.classList ? options?.componentsClass?.search?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-searching [records]="records" [searchingStyle]="options.searchingStyle"
        [class]="options?.componentsClass?.search?.alignmentClassList" (searchRecords)="getSearchRecords($event)">
      </aspire-searching>
    </div>

    <div *ngIf="options.showPagination && options?.componentsClass?.pagination?.position === 'bottom-right'"
      [class]="options?.componentsClass?.pagination?.classList ? options?.componentsClass?.pagination?.classList : 'col-md-4 col-sm-6 mt-2 mt-sm-0'">
      <aspire-pagination [totalItems]="records.length" [itemsPerPage]="options.itemsPerPage"
        [options]="options.paginationOptions" [reset]="options.resetPagination" (pageChanged)="onPageChanged($event)"
        [class]="options?.componentsClass?.pagination?.alignmentClassList">
      </aspire-pagination>
    </div>

    <div *ngIf="(!options?.showRecordsPerPageSelector && options?.componentsClass?.recordsPerPage?.position == 'bottom-right') ||
    (!options.showRecordsCount && options?.componentsClass?.recordsCount?.position == 'bottom-right') ||
    (!options?.showSearch && options?.componentsClass?.search?.position == 'bottom-right') ||
    (!options.showPagination && options?.componentsClass?.pagination?.position == 'bottom-right')"
      [class]="options?.componentsClass?.bottomBlankComponentClassList">
    </div>

  </div>
</div>